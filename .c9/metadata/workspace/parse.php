{"changed":false,"filter":false,"title":"parse.php","tooltip":"/parse.php","value":"<?php\nrequire ('Algorithm.php');\nclass Arg{\n    var $c_pot;\n    var $c_jos;\n    var $A;\n    var $S;\n    var $BR;\n    var $RET;\n    var $type;\n    var $attribute;\n    var $number;\n    function Arg($c_pot1,$c_jos1,$A1,$S1,$BR1,$RET1,$type1,$attribute1,$number1)\n    {\n        $this->c_pot = $c_pot1;\n        $this->c_jos = $c_jos1;\n        $this->A = $A1;\n        $this->S = $S1;\n        $this->BR = $BR1;\n        $this->RET = $RET1;\n        $this->food = $type1;\n        $this->attribute = $attribute1;\n        $this->number = $number1;\n        \n    }\n}\n\n\n$reason_c = 0;\n$procent_c = 0;\n$entities_c = 0;\n\n$temp = '';\n\n$reason = '';\n$procenat = '';\n$food = '';\n$attribute = '';\n$number = '';\n\n\n\n$query = \"https://api.projectoxford.ai/luis/v1/application?id=7cd88ba2-719b-4cb2-8b8d-9538fcffbe5b&subscription-key=cacac477e8104373a657bf4033b0e212\";\n$query = $query . '&q=' . urlencode($_GET[\"kw\"]);\n\n$string = file_get_contents($query);\n\n//$json_a = json_decode($string, TRUE);\n\n$jsonIterator = new RecursiveIteratorIterator(\n    new RecursiveArrayIterator(json_decode($string, TRUE)),\n    RecursiveIteratorIterator::SELF_FIRST);\n\nforeach ($jsonIterator as $key => $val) {\n    if($key === 'intent' && $reason_c < 1) {\n        $reason = $val;\n        $reason_c = 1;\n    } \n    if($key === 'score' && $procent_c < 1) {\n        $val = round($val,2);\n        $procenat = $val;\n        $procent = 1;\n    }\n    \n    if($key === 'type' && $entities_c == 1) {\n   \n        if($val == 'builtin.number')\n        {\n         $number = $temp;\n        }\n        else if($val == 'attribute')\n        {\n         $attribute = $temp;\n        }\n        else if($val == 'food')\n        {\n         $food = $temp;\n        }\n        $entities_c = 0;\n    }\n    \n    if($key === 'entity' && $entities_c < 1) {\n        \n        $temp = $val;\n    \n        $entities_c++;\n    } \n    \n    \n    \n}\nsession_start();\n\n$c_pot= $_SESSION['c_pot'];\n$c_jos= $_SESSION['c_jos'];\n$A= $_SESSION['A'];\n$S= $_SESSION['S'];\n$BR = $_SESSION['BR'];\n\nif (!isset($_SESSION['init']) || $_SESSION['init']== false )\n{\n $A = set_default($Base);\n $S = new Products();\n $c_pot = false;\n$c_jos = false;\n$BR = 1;\n}\n\n$Argument = new Arg($c_pot,$c_jos,$A,$S,$BR, '',$food,$attribute,$number);\n\nif($reason == 'iWant')\n{\n    \n    iWant($Argument);\n\n    \n}\nelse if($reason == 'dontWant')\n{\n    iDontWant($Argument);\n    \n}\nelse if($reason == 'iDontKnow')\n{\n    \n    iDontKnow($Argument);\n    \n}else if ($reason == 'hello'){\n    hello($Argument);\n} else if ($reason == 'goodbye'){\n    goodbye($Argument);    \n}else if ($reason == 'yes'){\n    yes($Argument);\n}else if ($reason == 'no')\n{\n    no($Argument);\n}\nelse {none($Argument);}\n$_SESSION['c_pot'] = $Argument->c_pot ;\n$_SESSION['c_jos'] = $Argument->c_jos;\n$_SESSION['A'] = $Argument->A;\n$_SESSION['S'] = $Argument->S;\n$_SESSION['BR'] = $Argument->BR;\n\necho (string)$Argument->RET;\n?>","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":1362,"scrollleft":0,"selection":{"start":{"row":96,"column":19},"end":{"row":96,"column":19},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":84,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1476606737421}